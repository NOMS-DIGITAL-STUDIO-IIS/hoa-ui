machine:
  node:
    version: 6.9.4
general:
  branches:
    ignore:
        - azure
dependencies:
  post:
    - npm run postinstall
test:
  override:
    - gulp build set-test-env unittestreport
    - npm run snyk-protect
  post:
    - mv test-results.xml $CIRCLE_TEST_REPORTS/test-results.xml
    - mkdir $CIRCLE_ARTIFACTS/test-coverage-html
    - mv build/reports/coverage/lcov-report/** $CIRCLE_ARTIFACTS/test-coverage-html

deployment:
  dev:
    branch: master
    commands:
        # Push the Dev Branch to Azure
        - git push --force origin $CIRCLE_SHA1:azure




